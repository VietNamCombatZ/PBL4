FROM ubuntu:22.04

RUN apt-get update && \
    apt-get install -y iproute2 iptables iputils-ping curl jq python3 && \
    rm -rf /var/lib/apt/lists/*

# Bật IP forwarding (nếu cần định tuyến IP)
RUN /bin/echo "net.ipv4.ip_forward=1" >> /etc/sysctl.conf || true

WORKDIR /app
COPY forwarder/forwarder.py /app/forwarder.py

# Mặc định: chạy forwarder; có thể override CMD để chạy shell
CMD ["python3", "/app/forwarder.py"]
